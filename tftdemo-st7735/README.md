# STM32F103C8 Black Pill ST7735 TFT Display Driver

A comprehensive graphics library for driving ST7735-based 1.8" TFT LCD displays using STM32F103C8 (Black Pill) with STM32 HAL library.
The code is modified from the deliverables generated by **claude-sonnet-4-20250929** model.

## Features

### Graphics Capabilities
- ✅ Fast SPI communication (18 MHz)
- ✅ RGB565 color format (65K colors)
- ✅ Hardware-accelerated drawing
- ✅ Multiple screen rotations (0°, 90°, 180°, 270°)
- ✅ Double-buffering support ready

### Drawing Functions
- **Primitives**: Pixels, lines, rectangles, circles
- **Filled Shapes**: Solid rectangles, circles
- **Text Rendering**: Multiple font sizes with custom fonts
- **Advanced**: Color gradients, image drawing, animations
- **Color Tools**: RGB565 conversion utilities

### Demo Programs
1. **Fill Screen** - Solid color transitions
2. **Line Patterns** - Horizontal, vertical, diagonal lines
3. **Rectangles** - Concentric and grid patterns
4. **Circles** - Outlined and filled circles
5. **Color Palette** - RGB gradient bars
6. **Gradient Effects** - Smooth color transitions
7. **Text Display** - Multi-line text rendering

## Hardware Requirements

### Components
- **STM32F103C8T6** Black Pill development board
- **ST7735** 1.8" TFT LCD Display (128x160 pixels)
- Jumper wires
- Breadboard (optional)

### Pin Connections

| ST7735 Pin | Black Pill Pin | Function |
|------------|----------------|----------|
| VCC        | 3.3V           | Power    |
| GND        | GND            | Ground   |
| CS         | PA4            | Chip Select |
| RESET      | PA3            | Hardware Reset |
| A0/DC      | PA2            | Data/Command |
| SDA/MOSI   | PA7            | SPI1 MOSI |
| SCK        | PA5            | SPI1 Clock |
| LED        | 3.3V           | Backlight |

### Wiring Diagram
```
ST7735 Display          STM32F103C8 Black Pill
┌──────────────┐        ┌─────────────────┐
│              │        │                 │
│   VCC   ●────┼────────┼─● 3.3V          │
│   GND   ●────┼────────┼─● GND           │
│   CS    ●────┼────────┼─● PA4           │
│   RESET ●────┼────────┼─● PA3           │
│   A0/DC ●────┼────────┼─● PA2           │
│   SDA   ●────┼────────┼─● PA7 (MOSI)    │
│   SCK   ●────┼────────┼─● PA5 (SCK)     │
│   LED   ●────┼────────┼─● 3.3V          │
│              │        │                 │
└──────────────┘        └─────────────────┘
```

## Configuration

### SPI Configuration
Located in `Src/main.c` - `MX_SPI1_Init()`:
```c
hspi1.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_2; // 18 MHz
hspi1.Init.CLKPolarity = SPI_POLARITY_LOW;
hspi1.Init.CLKPhase = SPI_PHASE_1EDGE;
```

### System Clock
- **CPU Clock**: 72 MHz (Max for STM32F103C8)
- **APB2 Clock**: 72 MHz (SPI1 peripheral)
- **APB1 Clock**: 36 MHz

## API Reference

### Initialization
```c
void ST7735_Init(SPI_HandleTypeDef *hspi);
void ST7735_SetRotation(uint8_t rotation);
```

### Basic Drawing
```c
void ST7735_FillScreen(uint16_t color);
void ST7735_DrawPixel(int16_t x, int16_t y, uint16_t color);
void ST7735_DrawLine(int16_t x0, int16_t y0, int16_t x1, int16_t y1, uint16_t color);
```

### Shapes
```c
void ST7735_DrawRectangle(int16_t x1, int16_t y1, int16_t x2, int16_t y2, uint16_t color);
void ST7735_FillRectangle(int16_t x1, int16_t y1, int16_t x2, int16_t y2, uint16_t color);
void ST7735_DrawCircle(int16_t x0, int16_t y0, int16_t r, uint16_t color);
void ST7735_FillCircle(int16_t x0, int16_t y0, int16_t r, uint16_t color);
void ST7735_DrawTriangle(int16_t x1, int16_t y1, int16_t x2, int16_t y2, int16_t x3, int16_t y3, uint16_t color);
void ST7735_FillTriangle(int16_t x1, int16_t y1, int16_t x2, int16_t y2, int16_t x3, int16_t y3, uint16_t color);
```

### Text
```c
void ST7735_WriteChar(uint16_t x, uint16_t y, char ch, FontDef font, uint16_t color, uint16_t bgcolor);
void ST7735_WriteString(uint16_t x, uint16_t y, const char* str, FontDef font, uint16_t color, uint16_t bgcolor);
```

### Advanced
```c
void ST7735_DrawImage(uint16_t x, uint16_t y, uint16_t w, uint16_t h, const uint16_t* data);
uint16_t ST7735_Color565(uint8_t r, uint8_t g, uint8_t b);
```

## References

- [STM32F103C8 Datasheet](https://www.st.com/resource/en/datasheet/stm32f103c8.pdf)
- [ST7735 Controller Datasheet](https://www.displayfuture.com/Display/datasheet/controller/ST7735.pdf)
- [STM32 HAL Documentation](https://www.st.com/resource/en/user_manual/dm00105879-description-of-stm32f1-hal-and-ll-drivers-stmicroelectronics.pdf)
